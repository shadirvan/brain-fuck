## SSL Pinning 
- SSL Pinning is a security methodology utilized to ensure that application traffic is not being intercepted (Man-In-The-Middle)
	- some mobile application verify that the received traffic is coming from an KNOWN certificate.
	- We can import a certificate into the phone as a root or user certificate, but it STILL might not be trusted by the application.
	- This can cause our application to crash when we try to intercept the network traffic.
- For a pentester this makes the job a bit harder. 
- ![[Pasted image 20251204123118.png]]

## Proxy Tools
- The proxy tools helps intercept the traffic
### Burpsuit
- proxy tool with a lot of built in penetration testing tools
- can be used for IOS and Android.
### ProxyMan
- New tool that works only on MacOS.
- It has the ability to easily import it's certificate into the Mac Keychain and intercept application traffic.
- can be used for IOS and Android
### Others
- other options include mitmproxy, charles proxy, fiddler, etc.
## Android Interception Process


1. Start Proxy Software
2. Configure Proxy Software
3. Set Proxy of the Emulator (or Wifi settings for a physical device)
4. Intercept HTTP traffic.
5. Import CA Certificate
6. Trust CA Certificate in Android Certificate Store
7. Intercept HTTP Traffic = Profit ?! (or be shamed by SSL Pinning)
8. If shamed by SSL Pinning, try Objection/Frida


### Dynamic Analysis using MobSF
- create a virtual machine that does not include google playstore or google APIs
- Start Emulator from the commandline:
	- Add the Emulator to path : C:\Users\<user>\AppData\Local\Android\Sdk\emulator
	- Run `emulator -list-avds` to list the android emulators
	- Run the emulator with the command `emulator -avd <avd_name> -writable-system -no-snapshot`
	- Start MobSF and perform the dynamic Analysis.
## Setting Proxy on BurpSuite
- Goto proxy options in burpsuit and add a proxy that bind to all interface and port 8082.
- Goto the setting options of AVD and on the proxy tab add the manual proxy configuration. set hostname as 127.0.0.1 and port to 8082.
- Click APPLY if the proxy status is Success then good to go.
- Now We need to import the certificates: click on Import/Export CA certificate button the burpsuite proxy settings.
- Select Certificate in DER format under Export.
- Select the location for exporting and name the certificate "burp_cert.CER". Do not of the extension and choose only this as android only support this.
- Drag the certificate file to android to copy it.
- In the Android Settings -> Security -> Credential Storage -> Install from SD Card.
- Select the certificate and give it a name.