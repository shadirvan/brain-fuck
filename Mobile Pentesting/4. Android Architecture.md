- Android is based on Linux Operating System
- It takes Linux commands
- It has same  file permission model as android
![[Pasted image 20251107093454.png]]

- Every application is run in a virtual machine know as the Android runtime.
- Dalvik was original runtime VM, and is still referenced to by the name Dalvik bytecode.
- But this is no longer utilized in modern android smartphones.

### Android Runtime (ART)
- This is the modern translation layer from the application's bytecode to device instructions.
- every app runs in it's own sandbox
- file system applications  are isolated by creating a new user unique for that application
- This users  has a UID between 10000 to 999999, the username will be similar to u0_a188 for the UID 10188
	- /data/app/com.example.app - stores generic application data.
	- /data/data/com.example.app - runtime storage of data
	- /mnt/sdcard/Android/data/com.example.app - externally stored location for runtime
	- /data/data/com.example2.app - different app with different user
	- This stops application from interacting unless the permissions are explicitly granted, or a Content Provider/Broadcast Receiver is exposed.
	- Broadcast receiver are the popups that get when a link or something is clicked and ready to open in apps:
	- ![[Pasted image 20251107101152.png]]
- Root user / System level users can only access all these directories.
- Android supports profiles that isolate the App Data, Wifi , Bluetooth, clipboard histories
- Primary Account - user created first time the the phone is started. always running, remove only on factory reset.
- Secondary User- Additional users you can add to device can be created or deleted by primary user.
- Guest User - A fast way to have a guest access to a phone. limit what they have access to.
- Kid mode - Profile/Account for kids(Google kids spaces), usually vendor specific Samsung Kid Mode.
## Android Architecture
![[Pasted image 20251107102153.png]]

### Linux Kernal
- Android runs SELInux(Securtiy Enhanced Linux ) from Android 4.2
- ![[Pasted image 20251107102335.png]]
- This Linux Kernel has to support multiple CPU types(ARM, SoC) and 32 bit and 64 bit
- Application are explicitly told which version of Android Runtime/API version to run on in Android Manifest File(minSDKVersion)
- The Higher version the better but developers try to include as much customer as possible.
- Drivers control access to hardware components like Bluetooth, Wifi, LTE, Display.
### Hardware Abstraction Layer
- Allows application to access hardware components irrespective of the device manufacture or type.
- New/ Upcoming HAL Types:
	- Automotive - Android Auto, Apple Car Play
	- IoT
		- Fitness Watches
		- Fitness Devices(peloton,etc)
		- IoT Home Devices (Alexa, Google Home,etc)
	- Gaming Peripherals.
### Native C vs Android Runtime
- C and C++ are the device's native language.
	- Does not require a VM
	- webkit-built in browser for the app(IFrame)
	- OpenMAX AL, OpenGL ES - UI frameworks for 2D/3D models.
- Java is often easier to code so developers use it.
	- In 2019 Google Announced Kotlin to be the preferred coding standard.
### Java API Framework
- This often what allow apps to interact with Other apps, and also the device itself.
- Content Providers - a way of sharing data to other applications via a specific directory
	- content://<app_url>/directory
-  View System - Utilized for making apps UI and Normalizing it
- Managers(Manages this like):
	- Notification
	- Telephony
	- Packages
	- Location
### System Applications Layer
- Pre-intstalled applications on the Android Phone
	- Contacts, Phone, System Settings,etc
	- Google Applications
	- Vendor Specific Apps